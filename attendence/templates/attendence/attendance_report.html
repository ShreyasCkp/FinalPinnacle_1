{% extends 'layout.html' %}
{% load static %}
{% load custom_filters %}
{% block title %}Attendace Reports{% endblock %}
{% block content %}



<style>
@media (max-width: 768px) {
  .topbar { left: 0; }
  .main-area, .content, .footer { margin-left: 0 !important; padding: 70px 16px 24px !important; }
  table { display: block; overflow-x: auto; white-space: nowrap; }
}
@media (max-width: 480px) {
  .container { max-width: 100%; margin: 0; border-radius: 0; padding: 16px; }
}
</style>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
    .generate {
        background-color: #800000;
        color: #fff;
        border: none;
    }

        .generate:hover {
            background-color: #a00000;
        }

    .card-custom {
        border: none;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        height: 100%;
    }

    .form-label {
        font-weight: 600;
    }

    .text-des {
        color: #800000;
        font-size: 20px;
    }

    .section-heading {
        font-weight: 600;
        color: #800000;
        margin-bottom: 20px;
        text-align: center;
        font-size: 22px;
    }

    .report-results {
        min-height: 200px;
    }

    .content {
        padding: 44px 26px 40px;
        margin-left: 200px;
    }
</style>

<div class="container mt-4">
    <h2 class="section-heading">Attendance Reports</h2>

    <div class="row g-4">
        <!-- Left: Filters -->
        <div class="col-lg-4 col-md-6">
            <div class="card card-custom p-4">
                <form method="get">
                    <div class="mb-3">
                        <label for="report_type" class="form-label">Report Type</label>
                        <select name="report_type" class="form-select" id="report_type">
                            <option value="">-- Select Report Type --</option>
                            <option value="daily" {% if report_type == 'daily' %}selected{% endif %}>Daily</option>
                            <option value="weekly" {% if report_type == 'weekly' %}selected{% endif %}>Weekly</option>
                            <option value="monthly" {% if report_type == 'monthly' %}selected{% endif %}>Monthly</option>
                            <option value="semester" {% if report_type == 'semester' %}selected{% endif %}>Semester</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="category" class="form-label">Category</label>
                        <select name="category" class="form-select" id="category">
                            <option value="">-- Select Category --</option>
                            <option value="staff" {% if category == 'staff' %}selected{% endif %}>Staff Only</option>
                            <option value="student" {% if category == 'student' %}selected{% endif %}>Student Only</option>
                            <option value="both" {% if category == 'both' %}selected{% endif %}>Staff and Student</option>
                        </select>
                    </div>

                    <div class="d-grid">
                        <button type="submit" class="btn generate">Generate Report</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Right: Report Results -->
        <div class="col-lg-8 col-md-6">
            <div class="card card-custom p-4 report-results">
                {% if results %}
                <h5 class="mb-3 text-des"> Report Results</h5>
                <ul class="list-group">
                    {% for key, value in results.items %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        {{ key|prettify_label }}

                        <span class="fw-bold">{{ value }}</span>
                    </li>
                    {% endfor %}
                </ul>
                {% else %}
                <p class="text-muted">No report generated yet. Please select filters and click <strong>"Generate Report"</strong>.</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}

